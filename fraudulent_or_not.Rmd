---
title: "Fraudulent or not?"
author: "Sari Vesiluoma"
date: "6 11 2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r libraries, include=FALSE}
# Ensuring having required libraries
if(!require(tidyverse)) install.packages("tidyverse", repos = "http://cran.us.r-project.org")
library(tidyverse)
if(!require(caret)) install.packages("caret", repos = "http://cran.us.r-project.org")
library(caret)
if(!require(readr)) install.packages("readr", repos = "http://cran.us.r-project.org")
library(readr)
if(!require(knitr)) install.packages("knitr", repos = "http://cran.us.r-project.org")
library(knitr)
```

## Introduction

The goal in this project is to learn how to predict a fraudulent financial transaction. The data used here is called Synthetic Financial Datasets for Fraud Detection generated by the PaySim mobile money simulator (https://www.kaggle.com/ntnu-testimon/paysim1).As described on the web page, the dataset is a synthetic one, generated using the simulator called PaySim. It uses aggregated data from a private dataset to generate a synthetic dataset that resembles the normal operation of transactions and injects malicious behaviour. 

PaySim simulates mobile money transactions based on a sample of real transactions extracted from one month of financial logs from a mobile money service implemented in an African country. The synthetic dataset is scaled down 1/4 of the original dataset.

I have downloaded the dataset from the net (the link above) and I have unzipped it to the same folder where my R script and the rmd file are. Here, I am reading the data from my folder. 

<<<<<<< HEAD
```{r read_data, include=FALSE}
fraud_or_not <- read_csv("PS_20174392719_1491204439457_log.csv")
```

The dataset, here referred with a variable name fraud_or_not, has the following dimensions

```{r dim, echo=FALSE}
=======
The dataset, here referred with a variable name fraud_or_not, has the following dimensions

```{r read_and_dim, echo=FALSE}
fraud_or_not <- read_csv("PS_20174392719_1491204439457_log.csv")
>>>>>>> 0ee54eed2c92468750ec70677c777ee42690a3a0
dim(fraud_or_not)
```

Next I will analyse the data and split it to training and test sets. I will use different machine learning algorithms to try to predict which transaction is fraudulent and which not. In this kind of a case the speciality is that the amount of fraudulent transactions is very minor compared to the amount of non-fraudulent transactions, as we will see. 


## Analysis

Let's look the data first as is. Like can be seen from the summary below, there are e.g. no NA values which would need to be cleaned. 

```{r summary}
summary(fraud_or_not)
str(fraud_or_not)
fraud_or_not %>% head()
```

The data has 11 columns which are:

```{r explanations, echo=FALSE, warning = FALSE}
# Showing the feature explanations as a table
explanations <- data.frame(feature = "step", expl = "maps a unit of time in the real world. 1 step is 1 hour of time. Total steps 744 (30 days simulation).")
explanations <- bind_rows(explanations, data_frame(feature = "type", expl = "CASH-IN, CASH-OUT, DEBIT, PAYMENT and TRANSFER."))
explanations <- bind_rows(explanations, data_frame(feature = "amount", expl = "amount of the transaction in local currency."))
explanations <- bind_rows(explanations, data_frame(feature = "nameOrig", expl = "customer who started the transaction"))
explanations <- bind_rows(explanations, data_frame(feature = "oldbalanceOrg", expl = "initial balance before the transaction"))
explanations <- bind_rows(explanations, data_frame(feature = "newbalanceOrig", expl = "new balance after the transaction"))
explanations <- bind_rows(explanations, data_frame(feature = "nameDest", expl = "customer who is the recipient of the transaction"))
explanations <- bind_rows(explanations, data_frame(feature = "oldbalanceDest", expl = "initial balance recipient before the transaction"))
explanations <- bind_rows(explanations, data_frame(feature = "newbalanceDest", expl = "new balance recipient after the transaction"))
explanations <- bind_rows(explanations, data_frame(feature = "isFraud", expl = "Transactions made by the fraudulent agents inside the simulation"))
explanations <- bind_rows(explanations, data_frame(feature = "isFlaggedFraud", expl = "An illegal attempt in this dataset is an attempt to transfer more than 200.000 in a single transaction."))
kable(explanations, caption = "Explanations of the features")
```


## Results


## Conclusion